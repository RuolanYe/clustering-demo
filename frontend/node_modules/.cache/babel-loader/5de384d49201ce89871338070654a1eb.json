{"ast":null,"code":"var _jsxFileName = \"/Users/sophiaye/Desktop/mern_projects/Clustering/frontend/src/components/Dashboard.js\",\n    _s = $RefreshSig$();\n\nimport React, { useRef, useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { getImages, createImage } from '../reducers/imagesSlice';\nimport * as d3 from 'd3';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Dashboard() {\n  _s();\n\n  //get image list from redux state\n  const dispatch = useDispatch();\n  const imageList = useSelector(state => state.imagesSlice.images);\n  useEffect(() => {\n    dispatch(getImages());\n  }, [dispatch]); //d3 plots\n\n  const [data] = useState([[90, 20], [20, 100], [66, 44], [53, 80], [24, 182], [80, 72], [10, 76], [33, 150], [100, 15]]);\n  const svgRef = useRef();\n  useEffect(() => {\n    // console.log('update')\n    //setting up container\n    const w = 400;\n    const h = 300;\n    const svg = d3.select(svgRef.current).attr('width', w).attr('height', h).style('overflow', 'visible').style('margin-top', '100px'); //setting up scaling\n\n    const xScale = d3.scaleLinear().domain([0, 100]).range([0, w]);\n    const yScale = d3.scaleLinear().domain([0, 200]).range([h, 0]); //setting up axis\n\n    const xAxis = d3.axisBottom(xScale).ticks(data.length);\n    const yAxis = d3.axisBottom(yScale).ticks(10);\n    svg.append('g').call(xAxis).attr('transform', `translate(0,${h})`);\n    svg.append('g').call(yAxis); //setting up axis labeling\n\n    svg.append('text').attr('x', w / 2).attr('y', h + 50).text('x');\n    svg.append('text').attr('y', h / 2).attr('x', -50).text('y'); //setting up svg data\n\n    svg.selectAll().data(data).enter().append('circle').attr('cx', d => xScale(d[0])).attr('cy', d => yScale(d[1])).attr('r', 2);\n  }, [imageList]); //create state to store data from input form\n\n  const [state, setState] = useState({\n    title: '',\n    image: null\n  });\n\n  const handleChange = e => {\n    setState({ ...state,\n      [e.target.id]: e.target.value\n    });\n  };\n\n  const handleImageChange = e => {\n    setState({ ...state,\n      image: e.target.files[0]\n    });\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault(); // console.log(state);\n\n    let form_data = new FormData();\n    form_data.append('image', state.image, state.image.name);\n    form_data.append('title', state.title); // let url = 'http://localhost:8000/api/images/';\n    // axios.post(url, form_data, {\n    //   headers: {\n    //     'content-type': 'multipart/form-data'\n    //   }\n    // })\n    //     .then(res => {\n    //       console.log(res.data);\n    //     })\n    //     .catch(err => console.log(err))\n\n    dispatch(createImage(form_data));\n    setState({\n      title: ''\n    }); // this.setState({image: ''});\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"Title\",\n          id: \"title\",\n          value: state.title,\n          onChange: handleChange,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          id: \"image\",\n          accept: \"image/png, image/jpeg\",\n          onChange: handleImageChange,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"submit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 129,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Dashboard, \"JF4jL4Fg4GBzQFtvSTnNKawnDzU=\", false, function () {\n  return [useDispatch, useSelector];\n});\n\n_c = Dashboard;\nexport default Dashboard;\n\nvar _c;\n\n$RefreshReg$(_c, \"Dashboard\");","map":{"version":3,"names":["React","useRef","useEffect","useState","axios","useSelector","useDispatch","getImages","createImage","d3","Dashboard","dispatch","imageList","state","imagesSlice","images","data","svgRef","w","h","svg","select","current","attr","style","xScale","scaleLinear","domain","range","yScale","xAxis","axisBottom","ticks","length","yAxis","append","call","text","selectAll","enter","d","setState","title","image","handleChange","e","target","id","value","handleImageChange","files","handleSubmit","preventDefault","form_data","FormData","name"],"sources":["/Users/sophiaye/Desktop/mern_projects/Clustering/frontend/src/components/Dashboard.js"],"sourcesContent":["import React ,{ useRef, useEffect, useState } from 'react'\nimport axios from 'axios'\nimport {useSelector, useDispatch} from 'react-redux'\nimport { getImages, createImage } from '../reducers/imagesSlice';\nimport * as d3 from 'd3'\n\nfunction Dashboard() {\n  //get image list from redux state\n    const dispatch = useDispatch()\n    const imageList = useSelector((state) => state.imagesSlice.images)\n    \n    useEffect(() => {\n\n      dispatch(getImages())\n\n    }, [dispatch])\n\n  //d3 plots\n    const [data] = useState([\n      [90,20],\n      [20,100],\n      [66,44],\n      [53,80],\n      [24,182],\n      [80,72],\n      [10,76],\n      [33,150],\n      [100,15]\n    ])\n    const svgRef = useRef()\n\n    useEffect(() => {\n\n      // console.log('update')\n\n      //setting up container\n      const w = 400;\n      const h = 300;\n      const svg = d3.select(svgRef.current)\n        .attr('width', w)\n        .attr('height', h)\n        .style('overflow', 'visible')\n        .style('margin-top','100px');\n\n      //setting up scaling\n      const xScale = d3.scaleLinear()\n        .domain([0,100])\n        .range([0,w]);\n      const yScale = d3.scaleLinear()\n        .domain([0,200])\n        .range([h,0]);\n\n      //setting up axis\n      const xAxis = d3.axisBottom(xScale).ticks(data.length);\n      const yAxis = d3.axisBottom(yScale).ticks(10);\n      svg.append('g')\n        .call(xAxis)\n        .attr('transform',`translate(0,${h})`);\n      svg.append('g')\n        .call(yAxis);\n\n      //setting up axis labeling\n      svg.append('text')\n        .attr('x',w/2)\n        .attr('y',h+50)\n        .text('x');\n      svg.append('text')\n        .attr('y',h/2)\n        .attr('x',-50)\n        .text('y');\n\n      //setting up svg data\n      svg.selectAll()\n        .data(data)\n        .enter()\n        .append('circle')\n          .attr('cx',d => xScale(d[0]))\n          .attr('cy',d => yScale(d[1]))\n          .attr('r',2);\n\n    }, [imageList])\n\n\n\n    //create state to store data from input form\n    const [state, setState] = useState({\n        title: '',\n        image: null\n    });\n\n    const handleChange = (e) => {\n        setState({\n            ...state,\n            [e.target.id]: e.target.value\n        })\n      };\n    \n    const handleImageChange = (e) => {\n        setState({\n            ...state,\n            image: e.target.files[0]\n        })\n      };\n    \n    const handleSubmit = (e) => {\n        e.preventDefault();\n        // console.log(state);\n        let form_data = new FormData();\n        form_data.append('image', state.image, state.image.name);\n        form_data.append('title', state.title);\n        // let url = 'http://localhost:8000/api/images/';\n        // axios.post(url, form_data, {\n        //   headers: {\n        //     'content-type': 'multipart/form-data'\n        //   }\n        // })\n        //     .then(res => {\n        //       console.log(res.data);\n        //     })\n        //     .catch(err => console.log(err))\n      \n        dispatch(createImage(form_data))\n        setState({title: ''});\n        // this.setState({image: ''});\n      };\n\n\n  return (\n    <div className=\"App\">\n        <form onSubmit={handleSubmit}>\n          <p>\n            <input type=\"text\" placeholder='Title' id='title' value={state.title} onChange={handleChange} required/>\n          </p>\n          <p>\n            <input type=\"file\"\n                   id=\"image\"\n                   accept=\"image/png, image/jpeg\"  onChange={handleImageChange} required/>\n          </p>\n          <input type=\"submit\"/>\n        </form>\n        {/* <div>         \n          {imageList.map((Img) => (\n            <img src={'http://localhost:8000'+Img.image} />      \n          ))}\n        </div> */}\n        \n      </div>\n  )\n}\n\nexport default Dashboard"],"mappings":"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"},"metadata":{},"sourceType":"module"}