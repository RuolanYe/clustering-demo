{"ast":null,"code":"var _jsxFileName = \"/Users/sophiaye/Desktop/mern_projects/Clustering/frontend/src/components/Dashboard.js\",\n    _s = $RefreshSig$();\n\nimport React, { useRef, useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { getImages, createImage } from '../reducers/imagesSlice';\nimport * as d3 from 'd3';\nimport { pack, hierarchy } from 'd3-hierarchy';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Dashboard() {\n  _s();\n\n  //get image list from redux state\n  const dispatch = useDispatch();\n  const imageList = useSelector(state => state.imagesSlice.images);\n  useEffect(() => {\n    dispatch(getImages());\n  }, [dispatch]); //d3 plots\n\n  const data = [];\n  data.push({\n    name: '1',\n    children: []\n  }, {\n    name: '2',\n    children: []\n  }, {\n    name: '3',\n    children: []\n  }); // data[1].children.push({name:'12314', image:'http://127.0.0.1:8000/media/post_images/Picture2.png'})\n\n  imageList.map(Img => {\n    data[Img.cluster - 1].children.push({\n      name: Img.title,\n      image: 'http://localhost:8000' + Img.image\n    });\n  });\n  useEffect(() => {\n    console.log(data); // console.log(data[1].children)\n  }, [data]); //create state to store data from input form\n\n  const [state, setState] = useState({\n    title: '',\n    image: null\n  });\n\n  const handleChange = e => {\n    setState({ ...state,\n      [e.target.id]: e.target.value\n    });\n  };\n\n  const handleImageChange = e => {\n    setState({ ...state,\n      image: e.target.files[0]\n    });\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault(); // console.log(state);\n\n    let form_data = new FormData();\n    form_data.append('image', state.image, state.image.name);\n    form_data.append('title', state.title); // let url = 'http://localhost:8000/api/images/';\n    // axios.post(url, form_data, {\n    //   headers: {\n    //     'content-type': 'multipart/form-data'\n    //   }\n    // })\n    //     .then(res => {\n    //       console.log(res.data);\n    //     })\n    //     .catch(err => console.log(err))\n\n    dispatch(createImage(form_data));\n    setState({\n      title: ''\n    }); // this.setState({image: ''});\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"Dashboard\",\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"Title\",\n          id: \"title\",\n          value: state.title,\n          onChange: handleChange,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          id: \"image\",\n          accept: \"image/png, image/jpeg\",\n          onChange: handleImageChange,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"submit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 81,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Dashboard, \"E3aLbhRnCkteOmUNiqbXha/F7NY=\", false, function () {\n  return [useDispatch, useSelector];\n});\n\n_c = Dashboard;\nexport default Dashboard;\n\nvar _c;\n\n$RefreshReg$(_c, \"Dashboard\");","map":{"version":3,"names":["React","useRef","useEffect","useState","axios","useSelector","useDispatch","getImages","createImage","d3","pack","hierarchy","Dashboard","dispatch","imageList","state","imagesSlice","images","data","push","name","children","map","Img","cluster","title","image","console","log","setState","handleChange","e","target","id","value","handleImageChange","files","handleSubmit","preventDefault","form_data","FormData","append"],"sources":["/Users/sophiaye/Desktop/mern_projects/Clustering/frontend/src/components/Dashboard.js"],"sourcesContent":["import React ,{ useRef, useEffect, useState } from 'react'\nimport axios from 'axios'\nimport {useSelector, useDispatch} from 'react-redux'\nimport { getImages, createImage } from '../reducers/imagesSlice';\nimport * as d3 from 'd3'\nimport {pack, hierarchy} from 'd3-hierarchy'\n\nfunction Dashboard() {\n  //get image list from redux state\n    const dispatch = useDispatch()\n    const imageList = useSelector((state) => state.imagesSlice.images)\n    \n    useEffect(() => {\n\n      dispatch(getImages())\n\n    }, [dispatch])\n\n  //d3 plots\n    const data=[]\n    data.push({name:'1',children:[]},\n              {name:'2',children:[]},\n              {name:'3',children:[]})\n    // data[1].children.push({name:'12314', image:'http://127.0.0.1:8000/media/post_images/Picture2.png'})\n    imageList.map((Img) => {\n      data[Img.cluster-1].children.push({name:Img.title, image:'http://localhost:8000'+Img.image})\n    })\n\n    useEffect(() => {\n      console.log(data)\n      // console.log(data[1].children)\n\n    }, [data])\n\n\n\n    //create state to store data from input form\n    const [state, setState] = useState({\n        title: '',\n        image: null\n    });\n\n    const handleChange = (e) => {\n        setState({\n            ...state,\n            [e.target.id]: e.target.value\n        })\n      };\n    \n    const handleImageChange = (e) => {\n        setState({\n            ...state,\n            image: e.target.files[0]\n        })\n      };\n    \n    const handleSubmit = (e) => {\n        e.preventDefault();\n        // console.log(state);\n        let form_data = new FormData();\n        form_data.append('image', state.image, state.image.name);\n        form_data.append('title', state.title);\n        // let url = 'http://localhost:8000/api/images/';\n        // axios.post(url, form_data, {\n        //   headers: {\n        //     'content-type': 'multipart/form-data'\n        //   }\n        // })\n        //     .then(res => {\n        //       console.log(res.data);\n        //     })\n        //     .catch(err => console.log(err))\n      \n        dispatch(createImage(form_data))\n        setState({title: ''});\n        // this.setState({image: ''});\n      };\n\n\n  return (\n    <div className=\"Dashboard\">\n        <form onSubmit={handleSubmit}>\n          <p>\n            <input type=\"text\" placeholder='Title' id='title' value={state.title} onChange={handleChange} required/>\n          </p>\n          <p>\n            <input type=\"file\"\n                   id=\"image\"\n                   accept=\"image/png, image/jpeg\"  onChange={handleImageChange} required/>\n          </p>\n          <input type=\"submit\"/>\n        </form>\n        {/* <div>         \n          {imageList.map((Img) => (\n            <img src={'http://localhost:8000'+Img.image} />      \n          ))}\n        </div> */}\n        {/* <svg ref={svgRef}></svg> */}\n    </div>\n  )\n}\n\nexport default Dashboard"],"mappings":"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"},"metadata":{},"sourceType":"module"}